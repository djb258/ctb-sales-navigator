{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "meta": {
    "name": "IMO_CONTROL",
    "version": "1.0.0",
    "created": "2026-01-30",
    "authority": "imo-creator",
    "status": "ACTIVE",
    "description": "Sales Navigator governance contract with Doppler enforcement",
    "constitution_file": "DOCTRINE.md"
  },

  "control_plane": {
    "control_version": "1.0.0",
    "upstream_repo": "imo-creator",
    "upstream_commit": "latest",
    "drift_detection": {
      "enabled": true,
      "warn_on_outdated": true,
      "check_frequency": "on_audit"
    }
  },

  "governance": {
    "sovereign": "imo-creator",
    "sovereignty_type": "INHERITED",
    "conformance_direction": "UPSTREAM",
    "interpretation_allowed": false,
    "modification_requires": ["ADR", "HUMAN_APPROVAL"]
  },

  "identity": {
    "repo_name": "sales-navigator",
    "hub_id": "HUB-SALES-NAV-20260130",
    "hub_type": "sales",
    "sovereign_reference": "SOV-SVG-AGENCY",
    "domain_spec": "doctrine/REPO_DOMAIN_SPEC.md"
  },

  "lifecycle": {
    "current_phase": "structural_instantiation",
    "allowed_phases": [
      "constitutional_admission",
      "structural_instantiation",
      "data_declaration",
      "execution_wiring",
      "dba_enforcement",
      "documentation_enforcement",
      "hygiene_audit",
      "cleanup_execution"
    ]
  },

  "structure": {
    "model": "HUB_SUBHUB_ALTITUDE",
    "hub": {
      "definition": "Repository root = Hub",
      "required_files": [
        "REGISTRY.yaml",
        "DOCTRINE.md",
        "README.md",
        "IMO_CONTROL.json"
      ]
    },
    "altitude": {
      "branches": ["sys", "data", "app", "ai", "ui"],
      "path_pattern": "src/{sys,data,app,ai,ui}/",
      "enforcement": "MANDATORY"
    }
  },

  "forbidden": {
    "folders": ["utils", "helpers", "common", "shared", "lib", "misc"],
    "files": [".env.local", ".env.production", ".env.development"],
    "patterns": ["*.secret", "*.credentials"]
  },

  "infrastructure": {
    "secrets_provider": {
      "name": "doppler",
      "project": "sales-navigator",
      "configs": ["dev", "staging", "prod"],
      "enforcement": "MANDATORY"
    },
    "forbidden_secret_sources": [
      ".env files",
      "hardcoded values",
      "environment variables not from Doppler",
      "local credential files"
    ],
    "presentation_layer": "lovable.dev"
  },

  "ctb_enforcement": {
    "enabled": true,
    "strict_mode": true,
    "allowed_root_folders": [
      "src",
      "docs",
      "config",
      "scripts",
      "tests",
      "templates",
      "doctrine",
      "quarantine"
    ],
    "src_structure": {
      "sys": {
        "purpose": "System infrastructure, env loaders, Doppler integration",
        "required": true
      },
      "data": {
        "purpose": "Schemas, queries, read-only data patterns",
        "required": true
      },
      "app": {
        "purpose": "Sales process workflows, meeting logic",
        "required": true
      },
      "ai": {
        "purpose": "AI agents, prompts, LLM integrations",
        "required": true
      },
      "ui": {
        "purpose": "Lovable.dev components, pages, styles",
        "required": true
      }
    }
  },

  "cc_descent_enforcement": {
    "enabled": true,
    "gates": {
      "CC-01": {
        "name": "Sovereign Declaration",
        "artifacts": ["DOCTRINE.md", "REGISTRY.yaml"],
        "status": "PASSED"
      },
      "CC-02": {
        "name": "Hub Identity + PRD",
        "artifacts": ["docs/PRD.md", "IMO_CONTROL.json"],
        "status": "IN_PROGRESS"
      },
      "CC-03": {
        "name": "Architectural Decisions",
        "artifacts": ["docs/ADR-*.md"],
        "status": "PENDING"
      },
      "CC-04": {
        "name": "Process Implementation",
        "artifacts": ["src/**/*.ts", "src/**/*.tsx"],
        "status": "BLOCKED"
      }
    }
  },

  "audit_mode": {
    "enabled": true,
    "attestation_required": true,
    "zero_tolerance": {
      "enabled": true,
      "blocked_on": ["CRITICAL", "HIGH"]
    }
  },

  "claude_code_behavior": {
    "must": [
      "Check IMO_CONTROL.json exists before any work",
      "Read doctrine/REPO_DOMAIN_SPEC.md for domain bindings",
      "Enforce CTB altitude structure",
      "Refuse to modify parent doctrine",
      "Verify Doppler is configured before allowing secrets access",
      "Block commits containing hardcoded secrets"
    ],
    "must_not": [
      "Modify parent doctrine files",
      "Skip descent gates",
      "Invent structure beyond doctrine",
      "Create .env files with secrets",
      "Bypass Doppler for environment configuration",
      "Create forbidden folders (lib, utils, helpers, etc.)"
    ]
  }
}
